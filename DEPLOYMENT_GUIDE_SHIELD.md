#!/bin/bash

echo "ðŸš€ DEPLOY FILAMENT SHIELD TO PRODUCTION SERVER"
echo "=============================================="
echo ""
echo "ðŸ“‹ Step 1: Login to Hostinger server via SSH"
echo "ssh username@your-server.hostinger.com"
echo ""
echo "ðŸ“‹ Step 2: Navigate to website directory"
echo "cd /path/to/maknaacademy"
echo ""
echo "ðŸ“‹ Step 3: Pull latest changes from GitHub"
echo "git pull origin main"
echo ""
echo "ðŸ“‹ Step 4: Install new Composer packages"
echo "composer2 install --no-dev --optimize-autoloader"
echo ""
echo "ðŸ“‹ Step 5: Run database migrations"
echo "php artisan migrate --force"
echo ""
echo "ðŸ“‹ Step 6: Clear all caches"
echo "php artisan config:clear"
echo "php artisan route:clear"
echo "php artisan view:clear"
echo ""
echo "ðŸ“‹ Step 7: Setup Shield permissions"
echo "chmod +x setup-shield-permissions.sh"
echo "./setup-shield-permissions.sh"
echo ""
echo "ðŸ“‹ Step 8: Test admin panel access"
echo "Visit: https://maknaacademy.com/admin"
echo "Login: admin@maknaacademy.com / password123"
echo ""
echo "ðŸŽ¯ EXPECTED RESULTS:"
echo "âœ… Admin panel accessible"
echo "âœ… Shield resources visible (Roles, Permissions)"
echo "âœ… User management with granular permissions"
echo "âœ… Hybrid authorization working"
echo ""
echo "ðŸ”§ IF ISSUES OCCUR:"
echo "1. Check PHP version (8.2+ required)"
echo "2. Verify file permissions"
echo "3. Check error logs: tail -f storage/logs/laravel.log"
echo "4. Run: ./fix-403-admin.sh if admin access denied"
echo ""
echo "ðŸ“± SHIELD FEATURES NOW AVAILABLE:"
echo "â€¢ /admin/shield/roles - Role management"
echo "â€¢ /admin/shield/permissions - Permission management"
echo "â€¢ Per-resource permissions (User, Event, Company, etc.)"
echo "â€¢ Super admin bypass for all permissions"
echo "â€¢ Traditional role system still works as backup"
